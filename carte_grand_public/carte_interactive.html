<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carte interactive</title>
    
    <!-- Liens vers les bibliothèques Bootstrap, Leaflet et jQuery -->
    <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->

    <!-- Bootstrap CSS -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"> -->
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script> -->

    <!-- Include the Leaflet.markercluster library -->
    <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" /> -->


    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script> -->
    <!-- Include the Leaflet.markercluster library -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/leaflet.markercluster.js"></script> -->

    <!-- Include icons and custom leaflet markers-->
    <!-- <link rel="stylesheet" href="css/leaflet.awesome-markers.css">
    <script src="js/leaflet.awesome-markers.js"></script>
     -->
    <!-- Counter animation-->
    <!-- <link rel="stylesheet" href="custom_styling.css"> -->

    <!-- Inclure les bibliothèques D3.js et Plotly.js -->
    <!-- <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->

       <!-- Liens vers les bibliothèques Bootstrap, Leaflet et jQuery -->
       <script src="js/jquery-3.6.0.min.js"></script>

       <!-- Bootstrap CSS -->
       <link rel="stylesheet" href="css/bootstrap.min.css">
       <!-- Bootstrap Font Icon CSS -->
       <!-- <link rel="stylesheet" href="css/bootstrap-icons.css"> -->
   
       <script src="js/bootstrap.bundle.min.js"></script>
       <script src="js/bootstrap.min.js"></script>
       <link rel="stylesheet" href="css/leaflet.css" />
       <script src="js/leaflet.js"></script>
   
       <!-- Include the Leaflet.markercluster library -->
       <link rel="stylesheet" href="css/MarkerCluster.css" />
       <link rel="stylesheet" href="css/MarkerCluster.Default.css" />
   
   
       <script src="js/papaparse.min.js"></script>
       <!-- Include the Leaflet.markercluster library -->
       <script src="js/leaflet.markercluster.js"></script>
   
       <!-- Include icons and custom leaflet markers-->
       <link rel="stylesheet" href="css/leaflet.awesome-markers.css">
       <script src="js/leaflet.awesome-markers.js"></script>
       
       <!-- Counter animation-->
       <link rel="stylesheet" href="custom_styling.css">
   
       <!-- Inclure les bibliothèques D3.js et Plotly.js -->
       <script src="js/d3.v5.min.js"></script>
       <script src="js/plotly-latest.min.js"></script>

        <!-- Inclure Danfo.js via CDN -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/danfojs-node@1.1.0/dist/danfo.min.js"></script> -->

        <!-- Lodash for filtering -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>

   
    
</head>
<body>

    <div class="container-fluid my-5 mx-5">

        

        <!-- Texte d'en tête -->
        <div class="row">
            <div class="col-8">
                <h1>Journée nationale de la résilience</h1>
                <p>Retrouvez sur cette carte la localisation des différentes actions organisées cette année dans le cadre de la <strong>journée nationale de la résilience du 13 octobre 2023</strong>, certaines actions prennent place à d'autres moments de l'année. Cliquez sur le marqueur d'une action pour avoir plus d'informations.</p>
            </div>
        </div>

        <!-- Contenu principal-->
        <div class="row">

            <!-- Volet de gauche : choix localisation / filtres -->
            <div class="col-md-3">

                <h4>Quelles actions JNR près de chez moi ?</h4>

                <form id="locationForm">
                <div class="form-group">
                    <label for="addressInput">Mon adresse :</label>
                    <input type="text" class="form-control" id="addressInput" required>
                </div>
                <div class="form-group mb-3">
                    <label for="distanceSelect">Distance d'affichage :</label>
                    <select class="form-control" id="distanceSelect">
                    <option value="10000">10 km</option>
                    <option value="20000">20 km</option>
                    <option value="50000">50 km</option>
                    <option value="100000">100 km</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Rechercher</button>
                </form>
                <!-- Élément pour afficher le message d'erreur -->
                <div id="error-message" class="text-danger"></div>

                <h4 class="mt-3">Qu'est ce qui m'intéresse ?</h4>
                <form id="filterForm">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group mb-3"  id="select_risques_form">

                                <label class="mb-2"><strong>Risques traités :</strong> </label>

                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="inondations">
                                    <label class="form-check-label" for="inondations">Inondations</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="feux_de_foret">
                                    <label class="form-check-label" for="feux_de_foret">Feux de forêt</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="tempete_cyclone">
                                    <label class="form-check-label" for="tempete_cyclone">Tempête/cyclone</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="seisme">
                                    <label class="form-check-label" for="seisme">Séisme</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="eruption_volcanique">
                                    <label class="form-check-label" for="eruption_volcanique">Éruption volcanique</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="mouvement_de_terrain">
                                    <label class="form-check-label" for="mouvement_de_terrain">Mouvement de terrain</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="risques_littoraux">
                                    <label class="form-check-label" for="risques_littoraux">Risques littoraux</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="avalanche">
                                    <label class="form-check-label" for="avalanche">Avalanche</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="radon">
                                    <label class="form-check-label" for="radon">Radon</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="accidents_industriels">
                                    <label class="form-check-label" for="accidents_industriels">Accidents industriels</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="accidents_nucleaires">
                                    <label class="form-check-label" for="accidents_nucleaires">Accidents nucléaires</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="rupture_de_barrage">
                                    <label class="form-check-label" for="rupture_de_barrage">Rupture de barrage</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="transport_de_matieres_dangereuses">
                                    <label class="form-check-label" for="transport_de_matieres_dangereuses">Transport de matières dangereuses</label>
                                </div>

                                <div id="deselect_risques" type="button" class="btn btn-light mt-2">
                                    Tout désélectionner
                                </div>

                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group" id="select_publics_form"> 
                                <!--Tous public, Famille, Jeune public, Séniors-->

                                <label class="mb-2"><strong>Public ciblé :</strong></label>

                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="tous_public">
                                    <label class="form-check-label" for="tout-public">Tout public</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="famille">
                                    <label class="form-check-label" for="famille">Famille</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="jeune_public">
                                    <label class="form-check-label" for="jeunePublic">Jeune public</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="seniors">
                                    <label class="form-check-label" for="seniors">Séniors</label>
                                </div>

                                <div id="deselect_publics" type="button" class="btn btn-light mt-2">
                                    Tout désélectionner
                                </div>


                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Filtrer les actions affichées</button>
                </form>

                <div class="mt-2" id="filter_action_counter"></div>

            </div>

            <!-- Carte -->
            <div class="col-md-5 mt-4">
                <div id="map" style="height: 600px;"></div>
                <div class="row mt-3"><h4>Sélectionnez une zone d'affichage :</h4></div>
                
                <div class="row mt-1">
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Guyane</button>
                    </div>
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">La Réunion</button>
                    </div>
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Guadeloupe</button>
                    </div>
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Martinique</button>
                    </div>
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Mayotte</button>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Nouvelle-Calédonie</button>
                    </div>
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Saint-Pierre et Miquelon</button>
                    </div>
                    <div class="col">
                        <button type="button" class="changeMapViewBtn btn btn-light" style="width:100%">Hexagone / Corse</button>
                    </div>
                </div>
            </div>

            <!-- Volet de droite : statistiques -->
            <div class="col mx-4">

                <!-- Nombre d'actions -->
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-1">
                        <p class="counter-count" id="nb_actions_counter"></p>
                    </div>
                    <div class="col d-flex align-items-center justify-content-center">
                        <h4>Actions recensées</h4>
                    </div>
                </div>

                <!-- Choix département -->
                <div class="row mt-3">

                <div class="btn btn-light text-start" id="chosen_dpt" style="width:100%"></div>

                    
                </div>

                <!-- Graph nb actions département -->
                <div class="row mt-4">
                    <div id="text_pre_graph"></div>
                    <div id="graph"></div>
                </div>

            </div>

        </div>

    </div>

    <!-- Inclusion du fichier JavaScript de gestion de la carte-->
    <script src="script_map.js"></script>

    <!-- Inclusion du fichier JavaScript de plot des stats départementales -->
    <script src="donnees_departementales.js"></script>

</body>
</html>
